# Учебный проект по PyThon "2":

## *Описание:*
Создаём "E-Commerce" проект.
## *Установка:*
- Установить зависимости.
```
pip install -r requirements.txt
```
- Установка тестировщика.
```
pip install pytest
```
- Установка теста с оценкой покрытия.
```
pip install pytest-cov
```
## *Инструкция перед началом работы*
Налейте чашечку чая, и садитесь по удобнее.
## *Примеры использования классов:*
## *Модуль 'product.py'*
### [class Product:](https://write.geeksforgeeks.org/)
Добавлены явные аннотации возвращаемых типов:
 - Все методы теперь имеют аннотации (-> None, -> float, -> Product, -> str)

Полная типизация методов:
 - Конструктор __init__ теперь имеет -> None
 - Магический метод __str__ аннотирован как -> str
 - Класс-метод new_product имеет явную аннотацию возвращаемого типа

Улучшенная обработка ошибок:
 - Использование walrus-оператора (:=) для проверки полей
 - Четкие сообщения об ошибках

Совместимость с mypy:
 - Нет предупреждений no-untyped-def
 - Полное соответствие PEP 484

Метод __add__:
 - Принимает только объекты класса Product
 - Возвращает сумму (price * quantity) для обоих продуктов
 - Вызывает TypeError при попытке сложить с другим типом

Дополнительные методы:
 - __str__ для красивого вывода информации
 - __eq__ для сравнения продуктов по названию

Типизация:
 - Аннотации типов для всех методов
 - Проверка типов в runtime

Безопасность:
 - Защита от неправильного использования
 - Четкие сообщения об ошибках

## *Модуль 'category.py'*
### [class Category:](https://write.geeksforgeeks.org/)

Приватный атрибут товаров:
 - Список товаров хранится в __products
 - Доступ только через методы класса

Безопасное добавление товаров:
 - Метод add_product() с проверкой типа
 - Автоматическое обновление счетчиков

Работа с JSON:
 - Загрузка данных через load_from_json()
 - Подробная обработка ошибок
 - Поддержка Path и строковых путей

Форматированный вывод:
 - Геттер products возвращает строку с товарами
 - Метод __str__ для строкового представления категории

Управление состоянием:
 - Счетчики категорий и товаров
 - Метод сброса счетчиков reset_counters()
 - Полная изоляция состояния класса

Типизация:
 - Аннотации типов для всех методов
 - Поддержка Python 3.7+ (через from __future__ import annotations)
 - Проверка типов в runtime

Обработка ошибок:
 - Четкие исключения с контекстом
 - Проверка структуры входных данных
 - Защита от некорректных состояний

Метод __str__:
 - Показывает название категории
 - Отображает количество продуктов в категории
 - Выводит общее количество товаров (сумма quantity всех продуктов)

Добавлено свойство total_quantity:
 - Вычисляет сумму товаров на складе
 - Может использоваться отдельно от str

## *Модуль 'loaders.py'*
### [class DataLoader:](https://write.geeksforgeeks.org/)
```
# Загрузка
categories = DataLoader.load_categories_from_json('data/products.json')

# Сохранение
DataLoader.save_categories_to_json('data/updated_products.json', categories)
```
Работа со списками:
 - Заменено использование строковых операций на работу с реальными объектами Product
 - Удалены попытки использовать append() для строк
 - Безопасное получение продуктов:

 - Используется доступ к защищенному атрибуту __products через getattr
## *Использования тестов:*
### [Модуль 'test_models.py '](https://write.geeksforgeeks.org/)
Добавлены аннотации типов:
 - Все методы теперь имеют -> None в аннотации возвращаемого типа
 - Параметры mock объектов аннотированы как Any

Исправлены проверки:
 - Проверка товаров через products.split('\n') вместо прямого доступа
 - Использование геттеров вместо прямого доступа к атрибутам

Дополненные тесты:
 - Добавлен тест на добавление невалидного продукта
 - Проверка вывода через unittest.mock

Совместимость с mypy:
 - Все функции имеют явные аннотации типов
 - Исправлены все предупреждения no-untyped-def

### [Модуль 'test_loaders.py '](https://write.geeksforgeeks.org/)
 - Добавлена проверка типа возвращаемого значения
 - Проверка содержимого через публичные методы
 - Тестирование форматированного вывода товаров
 - Использование 'ensure_ascii=False' для корректного сохранения кириллицы

## *Документация* 

### Наследование:
1. Класс Smartphone
2. Класс LawnGrass

Оба класса наследуют базовый функционал от Product

Дополнительные атрибуты:

 - Smartphone: производительность, модель, память, цвет 
 - LawnGrass: страна, срок прорастания, цвет

Совместимость: Сохранена возможность сложения продуктов через __add__
